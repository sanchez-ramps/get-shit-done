---
phase: 02-push-sync
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - commands/gsd/jira-status.md
autonomous: true

must_haves:
  truths:
    - "User can run gsd:jira-status to see sync state"
    - "Pending items displayed with type, id, and reason"
    - "Last sync time shown clearly"
    - "Synced items count shown by type"
  artifacts:
    - path: "commands/gsd/jira-status.md"
      provides: "Status command showing sync state"
      min_lines: 150
  key_links:
    - from: "commands/gsd/jira-status.md"
      to: ".planning/jira/sync-state.yaml"
      via: "YAML read"
      pattern: "sync-state\\.yaml"
    - from: "commands/gsd/jira-status.md"
      to: ".planning/jira/config.yaml"
      via: "config read"
      pattern: "config\\.yaml"
---

<objective>
Create the gsd:jira-status command that displays sync state including pending items, last sync time, and sync settings.

Purpose: Users need visibility into what's synced, what's pending, and when last sync occurred.

Output: A `commands/gsd/jira-status.md` command showing sync status at a glance.
</objective>

<execution_context>
@/home/vedmahadeo/projects/get-shit-done/get-shit-done/workflows/execute-plan.md
@/home/vedmahadeo/projects/get-shit-done/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-push-sync/02-CONTEXT.md
@.planning/phases/02-push-sync/02-RESEARCH.md
@commands/gsd/jira-init.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create gsd:jira-status command</name>
  <files>commands/gsd/jira-status.md</files>
  <action>
Create commands/gsd/jira-status.md with:

1. **Frontmatter**:
```yaml
---
name: gsd:jira-status
description: Show Jira sync status including pending items and last sync time
tools: Read, Bash
---
```

2. **Role section**: Display sync status at a glance

3. **Execution flow**:

**Step 1: Check Jira configured**
- Look for `.planning/jira/config.yaml`
- If missing: "Jira not configured. Run /gsd:jira-init first."

**Step 2: Load sync state**
- Read `.planning/jira/sync-state.yaml`
- If missing: "No sync history. Run /gsd:jira-sync to start."

**Step 3: Display sync status**

Output format (per CONTEXT.md - pending only focus):

```
## Jira Sync Status

**Project:** PROJ (https://company.atlassian.net)
**Last Sync:** 2026-02-01 14:30 (2 hours ago)
**Auto-sync:** Enabled

### Summary

| Type | Synced | Pending |
|------|--------|---------|
| Milestones | 1 | 0 |
| Phases | 2 | 1 |
| Plans | 5 | 2 |

### Pending Items

| Type | ID | Action | Reason |
|------|-----|--------|--------|
| Phase | 02-push-sync | create | Network timeout |
| Plan | 02-01 | create | Network timeout |
| Plan | 02-02 | create | Network timeout |

Run `/gsd:jira-sync` to retry pending items.
```

**Step 4: Show nothing to sync** (if no pending):
```
## Jira Sync Status

**Project:** PROJ
**Last Sync:** 2026-02-01 14:30 (2 hours ago)

✓ All items synced. Nothing pending.

| Type | Count |
|------|-------|
| Milestones | 1 |
| Phases | 3 |
| Plans | 8 |
```

4. **Time formatting**:
- Show absolute time + relative ("2 hours ago")
- Use locale-appropriate format

5. **Edge cases**:
- No pending items: Show "All synced" message
- No synced items yet: Show "No items synced yet"
- Config missing sync settings: Show defaults

Keep command concise (~150-200 lines).
  </action>
  <verify>
File exists at commands/gsd/jira-status.md with:
- Frontmatter with name, description, tools
- Execution flow checking for config and sync-state
- Summary table showing synced/pending counts
- Pending items table with type, id, action, reason
- Relative time display for last sync
  </verify>
  <done>
gsd:jira-status command created showing sync state with pending items table and summary counts.
  </done>
</task>

<task type="auto">
  <name>Task 2: Document sync config settings display</name>
  <files>commands/gsd/jira-status.md</files>
  <action>
Extend jira-status.md to show sync configuration:

1. **Config display section** (after Summary):

```
### Sync Settings

| Setting | Value |
|---------|-------|
| Auto-sync | Enabled |
| Verbosity | progress |
| On conflict | skip |
| Branch on execute | Yes |
```

2. **Read from config.yaml** (extended schema from Research):
```yaml
sync:
  enabled: true           # Toggle auto-sync hooks
  verbosity: progress     # quiet | progress | verbose
  onConflict: skip        # skip | prompt | overwrite
  branchOnExecute: true   # Create feature branch on execute-phase
```

3. **Show defaults if not configured**:
- If sync section missing from config.yaml, show defaults
- Indicate "(default)" next to default values

4. **Quick actions section**:
```
### Quick Actions

- `/gsd:jira-sync` — Sync pending items now
- `/gsd:jira-sync --dry-run` — Preview what would sync
- `/gsd:jira-sync --overwrite` — Force push (overwrite Jira changes)
```

5. **acli status check** (optional enhancement):
- Check `acli jira auth status`
- If auth expired: "⚠ Auth expired. Run `acli jira login`"
  </action>
  <verify>
jira-status.md includes:
- Sync settings table reading from config.yaml
- Default values shown when not configured
- Quick actions section with common commands
- Auth status warning if applicable
  </verify>
  <done>
Complete gsd:jira-status command with sync settings display and quick actions.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `commands/gsd/jira-status.md` exists with 150+ lines
2. Shows pending items table
3. Shows synced counts by type
4. Shows last sync time with relative display
5. Shows sync settings from config
6. Handles edge cases (no config, no sync state, all synced)
</verification>

<success_criteria>
- [ ] jira-status.md created with status display
- [ ] Pending items table with type/id/action/reason
- [ ] Summary counts by entity type
- [ ] Last sync time with relative display
- [ ] Sync settings from config.yaml
- [ ] Quick actions section
- [ ] Edge cases handled
</success_criteria>

<output>
After completion, create `.planning/phases/02-push-sync/02-02-SUMMARY.md`
</output>
